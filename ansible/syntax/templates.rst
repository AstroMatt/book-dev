*********
Templates
*********


Best practices
==============
* Ansible uses Jinja2
* Jinja2 is powerful. Don't have to use all of it
* Templates should be simple
* Avoid variable substitution
* Avoid setting variables in template
* As few Conditionals as possible (do not nest)
* Avoid conditional logic based on hostnames
* Simple control structures/iterations
* Design for your usecase (do not generalize)
* Avoid complex iteration conditions
* Label template output files as being generated by Ansible (warn not to edit manually)
* Consider using ``ansible_managed**`` variable with the comment filter (it will put date and some other info)

.. code-block:: jinja

    {{ ansible_managed | comment }}


Example
=======
.. code-block:: jinja

    127.0.0.1 localhost
    {% for host in groups['all'] %}
    {{ hostvars[host]['ansible_' + iface].ipv4.address }}  {{ host }}
    {% endfor %}
